<title>Vehicle Registration</title>
{% include 'navbar.html'%}
<script defer>
  function showFrame(step) {
    document.querySelectorAll(".step").forEach(el => el.classList.add("hidden"));
    document.getElementById("step-" + step).classList.remove("hidden");
  }
</script>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>

<!-- Full Page Center -->
<div class="min-h-screen flex items-center justify-center bg-gray-100">
  <!-- Card -->
  <div class="w-full max-w-3xl mx-auto p-8 bg-white rounded-xl shadow-lg border">
<div id="step-1" class="step">
  <h2 class="text-2xl font-bold mb-6 text-center text-blue-700">Vehicle Details</h2>
 <form method="post" enctype="multipart/form-data" class="space-y-6" action="{% url 'pricing' %}">
  {% csrf_token %}

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <!-- Asset Code -->
    <div>
      {{ vehicle_form.Ast_code.label_tag }}
      {{ vehicle_form.Ast_code }}
    </div>

    <!-- Plate No -->
    <div>
      {{ vehicle_form.Plate_no.label_tag }}
      {{ vehicle_form.Plate_no }}
    </div>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <div>
    {{ vehicle_form.model.label_tag }}
    {{ vehicle_form.model }}
  </div>
  <div>
    {{ vehicle_form.brand.label_tag }}
    {{ vehicle_form.brand }}
  </div>
</div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <!-- Vehicle Type Dropdown -->
    <div>
      <label class="block text-sm font-medium text-gray-700">Vehicle Type</label>
      <select name="Vehicle_type" class="w-full border px-4 py-2 rounded" required>
        <option value="">-- Select --</option>
        <option value="SUV">SUV</option>
        <option value="EV">EV</option>
        <option value="Sedan">Sedan</option>
        <option value="Hatchback">Hatchback</option>
      </select>
    </div>

    <!-- Engine Type Dropdown -->
    <div>
      <label class="block text-sm font-medium text-gray-700">Engine Type</label>
      <select name="Engine_type" class="w-full border px-4 py-2 rounded" required>
        <option value="">-- Select --</option>
        <option value="BS3">BS3</option>
        <option value="BS4">BS4</option>
        <option value="BS6">BS6</option>
      </select>
    </div>

    <!-- Fuel Type Dropdown -->
    <div>
      <label class="block text-sm font-medium text-gray-700">Fuel Type</label>
      <select name="Fuel_type" class="w-full border px-4 py-2 rounded" required>
        <option value="">-- Select --</option>
        <option value="Petrol">Petrol</option>
        <option value="Diesel">Diesel</option>
        <option value="Electric">Electric</option>
      </select>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      {{ vehicle_form.color.label_tag }}
      {{ vehicle_form.color }}
    </div>
    <div>
      {{ vehicle_form.year.label_tag }}
      {{ vehicle_form.year }}
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      {{ vehicle_form.mileage.label_tag }}
      {{ vehicle_form.mileage }}
    </div>
    <div>
      {{ vehicle_form.Purchase.label_tag }}
      {{ vehicle_form.Purchase }}
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <div>
      {{ vehicle_form.Insurance.label_tag }}
      {{ vehicle_form.Insurance }}
    </div>
    <div>
      {{ vehicle_form.chasis_no.label_tag }}
      {{ vehicle_form.chasis_no }}
    </div>
    <div>
      {{ vehicle_form.Engine_no.label_tag }}
      {{ vehicle_form.Engine_no }}
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      {{ vehicle_form.Rent.label_tag }}
      {{ vehicle_form.Rent }}
    </div>
    <div>
      {{ vehicle_form.meter_In.label_tag }}
      {{ vehicle_form.meter_In }}
    </div>
  </div>

  <!-- Vehicle Images -->
  <hr class="my-4">
  <h3 class="text-xl font-semibold text-blue-700">Upload Vehicle Images</h3>

  
  <<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <div>
    <label class="block text-sm font-medium text-gray-700">Front Image</label>
    {{ vehicle_form.Front_image }}
  </div>
  <div>
    <label class="block text-sm font-medium text-gray-700">Back Image</label>
    {{ vehicle_form.Back_image }}
  </div>
</div>

  <!-- Submit -->
  <div class="text-center">
    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
      Save Vehicle
    </button>
  </div>
</form>


</div>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const astSelect = document.querySelector("select[name='Ast_code']");
    const purchaseInput = document.querySelector("input[name='Purchase']");
    const brand=document.querySelector("input[name='brand']");
    const model=document.querySelector("input[name='model']");

    astSelect.addEventListener("change", function() {
      const code = this.value;
      if (code) {
        fetch(`get_purchase/?ast_code=${encodeURIComponent(code)}`)
          .then(response => response.json())
          .then(data => {
            if (data.purchase !== null) {
              purchaseInput.value = data.purchase;
              brand.value=data.brand;
              model.value=data.model
            } else {
              purchaseInput.value = "";
            }
          });
      } else {
        purchaseInput.value = "";
      }
    });
  });
</script>


